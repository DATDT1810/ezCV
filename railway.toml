[build]
builder = "DOCKERFILE"

[deploy]
numReplicas = 1

# --- API service ---
[[services]]
name = "api"
dockerfilePath = "Dockerfile.api"

[services.env]
ASPNETCORE_ENVIRONMENT = "Production"

[[services.ports]]
port = 8080  # ĐỔI THÀNH 8080
targetPort = 8080  # THÊM DÒNG NÀY

# --- Web service ---
[[services]]
name = "web"
dockerfilePath = "Dockerfile.web"

[services.env]
ASPNETCORE_ENVIRONMENT = "Production"
ApiSettings__BaseUrl = "https://ezcv-api.up.railway.app"

[[services.ports]]
port = 3000  # ĐỔI THÀNH 3000 (Railway recommendation)
targetPort = 8080  # THÊM DÒNG NÀY