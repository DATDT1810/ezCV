[build]
builder = "NIXPACKS"

[deploy]
numReplicas = 1

# API Service
[[services]]
name = "api"
[services.env]
ASPNETCORE_ENVIRONMENT = "Production"
ASPNETCORE_URLS = "http://*:8081"

# Web Service
[[services]]
name = "web"
[services.env]
ASPNETCORE_ENVIRONMENT = "Production"
ASPNETCORE_URLS = "http://*:8080"
ApiSettings__BaseUrl = "https://${RAILWAY_STATIC_URL}-api.railway.app"

# Ports
[[services.ports]]
port = 8080
service = "web"

[[services.ports]]
port = 8081
service = "api"