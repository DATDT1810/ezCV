[phases.setup]
cmds = [
    "pwd",
    "ls -la",
    "echo '=== CHECK SRC FOLDER ==='",
    "ls -la src/",
    "echo '=== FIND CSPROJ FILES ==='",
    "find . -name '*.csproj' -type f",
    
    "dotnet restore src/ezCV.Api/ezCV.Api.csproj",
    "dotnet restore src/ezCV.Web/ezCV.Web.csproj"
]

[phases.build]
cmds = [
    "dotnet publish src/ezCV.Api/ezCV.Api.csproj -c Release -o /app/output/api",
    "dotnet publish src/ezCV.Web/ezCV.Web.csproj -c Release -o /app/output/web"
]

[[services]]
name = "api"
[services.start]
cmd = "dotnet /app/output/api/ezCV.Api.dll --urls=http://0.0.0.0:8081"

[[services]]
name = "web"
[services.start]
cmd = "dotnet /app/output/web/ezCV.Web.dll --urls=http://0.0.0.0:8080"